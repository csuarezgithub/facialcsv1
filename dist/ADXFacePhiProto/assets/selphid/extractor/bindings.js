class documentExtractor{constructor(e,t,o){let l=new Module.DocumentExtractionOptions;l.setQualityThreshold(t),l.setEdgeOffset(o),this.detector=new Module.DocumentExtractor(l),this.width=null,this.height=null}setEdgeOffset(e){this.detector.setEdgeOffset(e)}setQualityThreshold(e){this.detector.setQualityThreshold(e)}detectCard(e,t,o,l,r,s){let d=Module.matFromArray(e,24),a=[],u=[],c=!0;try{let t=this.detector.detectNextNoOutput(d,o,l,r,s),n=t.getDocumentLocation(),i=t.getEdgesDetected();for(let e=0;e<i.size();e++)u[e]=i.get(e);for(let e=0;e<n.size();e++)a[e]=n.get(e);if(1==n.size())c=!1;else for(let e=0;e<n.size();e++)for(let t=0;t<2;t++)if(a[e][t]<0){c=!1;break}}catch(t){console.log(e,o,l,r,s),console.log(t)}return d.delete(),{cnt:a,out:t,show:c,edges:u}}mat2imgData(e){if(!(e instanceof Module.Mat))throw new Error("Please input the valid Module.Mat instance.");let t=new Module.Mat,o=e.type()%8,l=o<=Module.CV_8S?1:o<=Module.CV_32S?1/256:255,r=o===Module.CV_8S||o===Module.CV_16S?128:0;switch(e.convertTo(t,Module.CV_8U,l,r),t.type()){case Module.CV_8UC1:Module.cvtColor(t,t,Module.COLOR_GRAY2RGBA);break;case Module.CV_8UC3:Module.cvtColor(t,t,Module.COLOR_RGB2RGBA);break;case Module.CV_8UC4:break;default:throw new Error("Bad number of channels (Source image must have 1, 3 or 4 channels)")}let s=new ImageData(new Uint8ClampedArray(t.data()),t.cols,t.rows);return t.delete(),s}}